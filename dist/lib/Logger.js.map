{"version":3,"file":"Logger.js","sourceRoot":"","sources":["../../src/lib/Logger.ts"],"names":[],"mappings":";;AAAA,0BAA4B;AAC5B,IAAM,WAAW,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;AACvD,IAAM,GAAG,GAAG,kBAAkB,CAAC;AAE/B;IAKE;QACE,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,MAAM,CAAC;QACnD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;QAC5C,IAAI,CAAC,QAAQ,GAAG;YACd,OAAO,EAAE,CAAC;YACV,MAAM,EAAE,CAAC;YACT,MAAM,EAAE,CAAC;YACT,OAAO,EAAE,CAAC;SACX,CAAA;IACH,CAAC;IAEM,iBAAU,GAAjB,UAAkB,GAAU;QAC1B,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;IACtE,CAAC;IAED,4BAAW,GAAX,UAAY,KAAY;QACtB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC9D,CAAC;IAED,sBAAK,GAAL,UAAM,OAAkB,EAAE,MAAe;QACvC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IACvC,CAAC;IAED,qBAAI,GAAJ,UAAK,OAAkB,EAAE,MAAe;QACtC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IACtC,CAAC;IAED,qBAAI,GAAJ,UAAK,OAAkB,EAAE,MAAe;QACtC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IACtC,CAAC;IAED,sBAAK,GAAL,UAAM,OAAkB,EAAE,MAAe;QACvC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;IACvC,CAAC;IAED,sBAAK,GAAL,UAAM,KAAY,EAAE,OAAkB,EAAE,MAAe;QACrD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC;QAAC,CAAC;QAEzC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACxB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACX,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YAChD,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YACpC,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC,CAAC;gBAC9B,KAAK,GAAM,KAAK,OAAI,CAAC;YACvB,CAAC;YACD,OAAO,CAAC,GAAG,CAAI,GAAG,SAAI,KAAO,CAAC,CAAC;YAC/B,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACvB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,OAAO,CAAC,GAAG,CAAI,GAAG,SAAI,KAAK,UAAK,OAAS,CAAC,CAAC;QAC7C,CAAC;IAEH,CAAC;IACH,aAAC;AAAD,CAAC,AA3DD,IA2DC;AA3DY,wBAAM","sourcesContent":["import * as _ from 'lodash';\r\nconst validLevels = ['DEBUG', 'INFO', 'WARN', 'ERROR'];\r\nconst TAG = 'BUSYBEE-FLOWDOCK';\r\n\r\nexport class Logger {\r\n\r\n  private logLevel: string;\r\n  private levelMap: any;\r\n\r\n  constructor() {\r\n    this.logLevel = process.env['LOG_LEVEL'] || 'INFO';\r\n    this.logLevel = this.logLevel.toUpperCase();\r\n    this.levelMap = {\r\n      'DEBUG': 0,\r\n      'INFO': 1,\r\n      'WARN': 2,\r\n      'ERROR': 3\r\n    }\r\n  }\r\n\r\n  static isLogLevel(val:string) {\r\n    return validLevels.indexOf(val.toUpperCase()) !== -1 ? true : false;\r\n  }\r\n\r\n  passesLevel(level:string) {\r\n    return this.levelMap[level] >= this.levelMap[this.logLevel];\r\n  }\r\n\r\n  debug(message:string|any, pretty?:boolean) {\r\n    this.write('DEBUG', message, pretty);\r\n  }\r\n\r\n  info(message:string|any, pretty?:boolean) {\r\n    this.write('INFO', message, pretty);\r\n  }\r\n\r\n  warn(message:string|any, pretty?:boolean) {\r\n    this.write('WARN', message, pretty);\r\n  }\r\n\r\n  error(message:string|any, pretty?:boolean) {\r\n    this.write('ERROR', message, pretty);\r\n  }\r\n\r\n  write(level:string, message:string|any, pretty?:boolean) {\r\n    if (!this.passesLevel(level)) { return; }\r\n\r\n    if (_.isObject(message)) {\r\n      if (pretty) {\r\n        message = JSON.stringify(message, null, '\\t');\r\n      } else {\r\n        message = JSON.stringify(message);\r\n      }\r\n      if (this.logLevel === 'DEBUG') {\r\n        level = `${level}: `;\r\n      }\r\n      console.log(`${TAG}:${level}`);\r\n      console.log(message);\r\n    } else {\r\n      console.log(`${TAG}:${level}: ${message}`);\r\n    }\r\n\r\n  }\r\n}\r\n"]}